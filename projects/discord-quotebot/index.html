<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Quotebot | David Jr Sim</title>
<meta name="generator" content="Jekyll v4.4.1">
<meta property="og:title" content="Quotebot">
<meta name="author" content="David Jr Sim">
<meta property="og:locale" content="en">
<meta name="description" content="My friends say the darnedest things and I aim to capture them all for eternity.">
<meta property="og:description" content="My friends say the darnedest things and I aim to capture them all for eternity.">
<link rel="canonical" href="https://www.printhello.world/projects/discord-quotebot/">
<meta property="og:url" content="https://www.printhello.world/projects/discord-quotebot/">
<meta property="og:site_name" content="David Jr Sim">
<meta property="og:image" content="https://www.printhello.world/assets/img/projects/discord-quotebot-cover.png">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2024-03-02T00:00:00+00:00">
<meta name="twitter:card" content="summary_large_image">
<meta property="twitter:image" content="https://www.printhello.world/assets/img/projects/discord-quotebot-cover.png">
<meta property="twitter:title" content="Quotebot"> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"David Jr Sim"},"dateModified":"2025-06-21T02:21:16+00:00","datePublished":"2024-03-02T00:00:00+00:00","description":"My friends say the darnedest things and I aim to capture them all for eternity.","headline":"Quotebot","image":"https://www.printhello.world/assets/img/projects/discord-quotebot-cover.png","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://www.printhello.world/assets/img/logo.svg"},"name":"David Jr Sim"},"url":"https://www.printhello.world/projects/discord-quotebot/"}</script><meta name="keywords" content="David,David Jr,Sim,computer,scientist,researcher,automation,AI,artificial intelligence,machine learning,homebrew,server">
<meta name="color-scheme" content="dark light">
<meta name="theme-color" content="rgb(8, 0, 18)">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="David Jr Sim">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="application-name" content="David Jr Sim">
<meta name="generator" content="Hydejack v9.2.1">
<link rel="alternate" href="https://www.printhello.world/projects/discord-quotebot/" hreflang="en">
<link type="application/atom+xml" rel="alternate" href="https://www.printhello.world/feed.xml" title="David Jr Sim">
<link rel="shortcut icon" href="/assets/icons/favicon.ico">
<link rel="apple-touch-icon" href="/assets/icons/icon-192x192.png">
<link rel="manifest" href="/assets/site.webmanifest">
<link rel="preload" href="/assets/img/swipe.svg" as="image" id="_hrefSwipeSVG">
<link rel="dns-prefetch" href="/assets/js/search-worker-9.2.1.js" as="worker" id="_hrefSearch">
<link rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.css" id="_katexPreload"> <noscript><link rel="stylesheet" href="/assets/bower_components/katex/dist/katex.min.css"></noscript> <script>((r,a)=>{function d(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}r.loadJS=function(e,t){var n=a.createElement("script"),e=(n.src=e,t&&d(n,"load",t,{once:!0}),a.scripts[0]);return e.parentNode.insertBefore(n,e),n},r._loaded=!1,r.loadJSDeferred=function(e,t){var n=a.createElement("script");function o(){r._loaded=!0,t&&d(n,"load",t,{once:!0});var e=a.scripts[0];e.parentNode.insertBefore(n,e)}return n.src=e,r._loaded?o():d(r,"load",o,{once:!0}),n},r.setRel=r.setRelStylesheet=function(e){d(a.getElementById(e),"load",function(){this.rel="stylesheet"},{once:!0})}})(window,document); !function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this); !function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this); !function(w) { w._baseURL = '/'; w._publicPath = '/assets/js/'; w._noPushState = false; w._noDrawer = false; w._noNavbar = false; w._noToc = false; w._noSearch = false; w._advertise = false; w._search = { DATA_URL: '/assets/sitedata.json?no-cache', STORAGE_KEY: 'mini-search/', INDEX_KEY: 'index--2025-06-21T06:47:52+00:00', }; w._clapButton = false; }(window);</script><style id="_styleInline"> .clearfix,.sidebar-social::after{content:"";display:table;clear:both}.color-transition,.content .avatar,.nav-btn,.nav-btn-bar,.navbar,.message,.note-sm,#markdown-toc,.note,.hr-bottom,.hr-after::after,hr,.hr,p,body{transition:none}#_dark-mode{font-size:1.25rem}@media screen{body,body.light-mode{--body-color: #333;--body-bg: #fff;--border-color: #ebebeb;--gray: #777;--gray-bg: rgba(0, 0, 0, 0.025);--gray-text: #666;--menu-text: #bbb;--inv-body-color: #ccc;--inv-body-bg: var(--dark-mode-body-bg)}body .content,body.light-mode .content{-webkit-font-smoothing:initial;-moz-osx-font-smoothing:initial}body.dark-mode{--body-color: #ccc;--body-bg: var(--dark-mode-body-bg);--border-color: var(--dark-mode-border-color);--gray: rgba(255,255,255,.5);--gray-bg: rgba(255,255,255,.033);--gray-text: rgba(255,255,255,.625);--menu-text: rgba(255,255,255,.25);--inv-body-color: #333;--inv-body-bg: #fff}body.dark-mode .content{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}}@media screen and (prefers-color-scheme: light){body{--body-color: #333;--body-bg: #fff;--border-color: #ebebeb;--gray: #777;--gray-bg: rgba(0, 0, 0, 0.025);--gray-text: #666;--menu-text: #bbb;--inv-body-color: #ccc;--inv-body-bg: var(--dark-mode-body-bg)}body .content{-webkit-font-smoothing:initial;-moz-osx-font-smoothing:initial}}@media screen and (prefers-color-scheme: dark){body{--body-color: #ccc;--body-bg: var(--dark-mode-body-bg);--border-color: var(--dark-mode-border-color);--gray: rgba(255,255,255,.5);--gray-bg: rgba(255,255,255,.033);--gray-text: rgba(255,255,255,.625);--menu-text: rgba(255,255,255,.25);--inv-body-color: #333;--inv-body-bg: #fff}body .content{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.tippy-content{-webkit-font-smoothing:initial;-moz-osx-font-smoothing:initial}}html{--font-family: Noto Sans, Helvetica, Arial, sans-serif;--font-family-heading: Roboto Slab, Helvetica, Arial, sans-serif;--code-font-family: Fira Code, Menlo, Monaco, Consolas, monospace;--root-font-size: 15px;--root-font-size-medium: 16px;--root-font-size-large: 17px;--root-font-size-print: 8pt;--root-line-height: 1.75;--font-weight: 400;--font-weight-bold: 700;--font-weight-heading: 900;--content-width-5: 54rem;--content-margin-5: 4rem;--sidebar-width: 21rem;--half-content: 31rem;--break-point-3: 64em;--break-point-5: 86em;--break-point-dynamic: 104rem}*{box-sizing:border-box}html,body{margin:0;padding:0}html{font-family:var(--font-family);font-size:var(--root-font-size);line-height:var(--root-line-height)}body{color:var(--body-color);background-color:var(--body-bg);font-weight:var(--font-weight);overflow-y:scroll}.content img,.img,.content video,.video{max-width:100%;height:auto}.lead{margin-left:-1rem;margin-right:-1rem;margin-bottom:1.5rem}img.lead,video.lead{display:block;max-width:calc(100% + 2rem);width:calc(100% + 2rem);height:auto}.heading,.f6,h6,.h6,.f5,h5,.h5,.f4,.sidebar-nav-item,h4,.h4,.post-date,.f3,h3,.h3,.f2,h2,.h2,.f1,h1,.h1{font-family:var(--font-family-heading);font-weight:var(--font-weight-heading)}.f1,h1,.h1{font-size:2rem;line-height:1.3}.f2,h2,.h2{font-size:1.5rem;line-height:1.4}.f3,h3,.h3{font-size:1.2em;line-height:1.5}.f4,.sidebar-nav-item,h4,.h4,.post-date{font-size:1.08rem;line-height:1.6}.f5,h5,.h5{font-size:1.04rem;line-height:1.7}.f6,h6,.h6{font-size:1rem}.content h1>a,.content .h1>a{text-decoration:none;border-bottom:none}@media screen and (max-width: 42em){.content h1,.content .h1{font-size:1.7rem;line-height:1.35}}@media screen and (min-width: 86em){.content h1,.content .h1{font-size:2.4rem;line-height:1.25}}@media screen and (min-width: 104rem){body:not(.no-large-headings) .content h1,body:not(.no-large-headings) .content .h1{width:calc(100% + 50vw - 32rem);font-size:3rem;line-height:1.2}}@media screen and (min-width: 124em){body:not(.no-large-headings) .content h1,body:not(.no-large-headings) .content .h1{font-size:4rem;line-height:1.1}}h1,h2,h3,.h1,.h2,.h3{margin:4rem 0 1rem}h4,h5,h6,.h4,.post-date,.h5,.h6{margin:3rem 0 .5rem}p{margin-top:0;margin-bottom:1rem}p.lead{font-size:1.2em;margin-top:1.5rem;margin-bottom:1.5rem;padding:0 1rem}ul,ol,dl{margin-top:0;margin-bottom:1rem}ul,ol{padding-left:1.25rem}hr,.hr{border:0;margin:1rem 0;border-top:1px solid var(--border-color)}.hr-after::after{content:"";display:block;margin:1rem 0;border-top:1px solid var(--border-color)}.hr-bottom{border-bottom:1px solid var(--border-color);padding-bottom:.75rem;margin-bottom:1rem}.page{margin-bottom:3em}.page li+li{margin-top:.25rem}.page>header{position:relative;margin-bottom:2rem}@media screen and (min-width: 104rem){body:not(.no-third-column) .page>header>.lead+.note-sm,body:not(.no-third-column) .page>header>.lead+#markdown-toc,body:not(.no-third-column) .page>header>.lead+.note,body:not(.no-third-column) .page>header>a.no-hover+.note-sm,body:not(.no-third-column) .page>header>a.no-hover+#markdown-toc,body:not(.no-third-column) .page>header>a.no-hover+.note{position:absolute;right:-25rem;width:21rem;bottom:0;margin-bottom:0}}.page-title,.post-title{margin-top:0}.post-date{display:flex;justify-content:space-between;margin-top:-0.6rem;height:2rem;margin-bottom:.85rem;color:var(--gray)}.post-date>.ellipsis,.post-date#breadcrumbs>ul{cursor:pointer}.post-date [class^=icon-]{display:inline-block;font-size:smaller;margin-right:.25rem}.related-posts{padding-left:0;list-style:none;margin-bottom:2rem}.related-posts>li,.related-posts>li+li{margin-top:1rem}.message,.note-sm,#markdown-toc,.note{margin-bottom:1rem;padding:1rem;color:var(--gray-text);background-color:var(--gray-bg);margin-left:-1rem;margin-right:-1rem}.note-sm,#markdown-toc,.note{background:rgba(0,0,0,0);color:var(--body-color);font-size:smaller;border-left:1px solid var(--border-color);padding:1.2rem 1rem 0 1rem;margin:1rem -1rem;position:relative}.note-sm:before,#markdown-toc:before,.note:before{font-size:.667rem;font-weight:bold;font-style:normal;letter-spacing:.025rem;text-transform:uppercase;color:var(--menu-text);position:absolute;top:0}.note-sm[title]:before,[title]#markdown-toc:before,[title].note:before{content:attr(title) !important}.note{font-size:1rem}@media screen{body::before{content:"";width:.5rem;background:var(--gray-bg);position:fixed;left:0;top:0;bottom:0}}@media(min-width: 64em){body::before{width:21rem}}@media(min-width: 104rem){body::before{width:calc(50% - 31rem)}}@media screen and (min-width: 42em){html{font-size:var(--root-font-size-medium)}}@media screen and (min-width: 124em){html{font-size:var(--root-font-size-large)}}#breadcrumbs>ul{height:1rem;margin:-1.5rem 0 .5rem;padding:0;font-size:.667rem;color:var(--menu-text);text-transform:uppercase;width:100%;list-style:none}#breadcrumbs>ul>li{display:inline}#breadcrumbs>ul>li a{color:var(--gray);text-decoration:none;border-bottom:none}.fl{float:left}.fr{float:right}.mb4{margin-bottom:4rem}.mb6{margin-bottom:6rem}.mt0{margin-top:0}.mt1{margin-top:1rem}.mt2{margin-top:2rem}.mt3{margin-top:3rem}.mt4{margin-top:4rem}.pb0{padding-bottom:0}.ml1{margin-left:1rem}.mr1{margin-right:1rem}.sixteen-nine{position:relative}.sixteen-nine::before{display:block;content:"";width:100%;padding-top:56.25%}.sixteen-nine>*{position:absolute;top:0;left:0;right:0;bottom:0}.sixteen-ten{position:relative}.sixteen-ten::before{display:block;content:"";width:100%;padding-top:62.5%}.sixteen-ten>*{position:absolute;top:0;left:0;right:0;bottom:0}.four-three{position:relative}.four-three::before{display:block;content:"";width:100%;padding-top:75%}.four-three>*{position:absolute;top:0;left:0;right:0;bottom:0}.sr-only{display:none}.larger{font-size:larger}.smaller{font-size:smaller}.clearfix,.sidebar-social::after{content:"";display:table;clear:both}.ellipsis,#breadcrumbs>ul{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.border{border:1px solid var(--border-color)}@media(min-width: 42em){.border-radius,.lead,.page .aspect-ratio.sixteen-nine.lead{border-radius:.5rem}}.fallback-img{background-position:center;background-repeat:no-repeat;background-image:url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB3aWR0aD0iMTYwIiBoZWlnaHQ9IjkwIiB2aWV3Qm94PSIwIDAgMTYwIDkwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxnIHRyYW5zZm9ybT0ibWF0cml4KDAuMDQ4ODI4LCAwLCAwLCAwLjA0Nzk5MSwgNTQuOTk5OTczLCAyMC40MjgxNDgpIj4KICAgIDxwYXRoIHN0eWxlPSJmaWxsOnJnYmEoMTI4LDEyOCwxMjgsLjMzKSIgZD0iTTk1OS44ODQgMTI4YzAuMDQwIDAuMDM0IDAuMDgyIDAuMDc2IDAuMTE2IDAuMTE2djc2Ny43N2MtMC4wMzQgMC4wNDAtMC4wNzYgMC4wODItMC4xMTYgMC4xMTZoLTg5NS43N2MtMC4wNDAtMC4wMzQtMC4wODItMC4wNzYtMC4xMTQtMC4xMTZ2LTc2Ny43NzJjMC4wMzQtMC4wNDAgMC4wNzYtMC4wODIgMC4xMTQtMC4xMTRoODk1Ljc3ek05NjAgNjRoLTg5NmMtMzUuMiAwLTY0IDI4LjgtNjQgNjR2NzY4YzAgMzUuMiAyOC44IDY0IDY0IDY0aDg5NmMzNS4yIDAgNjQtMjguOCA2NC02NHYtNzY4YzAtMzUuMi0yOC44LTY0LTY0LTY0djB6Ii8+CiAgICA8cGF0aCBzdHlsZT0iZmlsbDpyZ2JhKDEyOCwxMjgsMTI4LC4zMykiIGQ9Ik04MzIgMjg4YzAgNTMuMDIwLTQyLjk4IDk2LTk2IDk2cy05Ni00Mi45OC05Ni05NiA0Mi45OC05NiA5Ni05NiA5NiA0Mi45OCA5NiA5NnoiLz4KICAgIDxwYXRoIHN0eWxlPSJmaWxsOnJnYmEoMTI4LDEyOCwxMjgsLjMzKSIgZD0iTTg5NiA4MzJoLTc2OHYtMTI4bDIyNC0zODQgMjU2IDMyMGg2NGwyMjQtMTkyeiIvPgogIDwvZz4KPC9zdmc+")}hy-push-state a{color:var(--body-color)}@supports not ((text-decoration-thickness: initial) and (text-underline-offset: initial)){hy-push-state a{text-decoration:none;border-bottom:2px solid}}@supports(text-decoration-thickness: initial) and (text-underline-offset: initial){hy-push-state a{text-decoration-style:solid;text-underline-offset:.35rem;text-decoration-thickness:2px}}hy-push-state a.no-hover{border-bottom:none;text-decoration-thickness:unset;text-underline-offset:unset}@supports(text-decoration-thickness: initial) and (text-underline-offset: initial){.content a:not(.btn):not(.no-hover){text-decoration-color:var(--accent-color-faded)}}.content a:not(.btn):not(.no-hover){border-color:var(--accent-color-faded)}.content .aspect-ratio{overflow:hidden}.content .aspect-ratio img{margin:0;width:100%;height:100%;background-color:var(--gray-bg)}hy-drawer{width:100%;position:relative;overflow:hidden;display:block;z-index:4}@media screen and (min-width: 64em){hy-drawer{position:fixed;width:21rem;top:0;left:0;bottom:0;margin-left:0}hy-drawer.cover{position:relative;width:100%}}@media screen and (min-width: 104rem){hy-drawer{width:calc(50% - 31rem)}}.sidebar{position:relative;display:flex;justify-content:center;align-items:center;color:hsla(0,0%,100%,.75);text-align:center;min-height:100vh}.sidebar.invert{color:rgba(32,32,32,.75)}.sidebar a{color:#fff;border-bottom-color:hsla(0,0%,100%,.2);text-decoration-color:hsla(0,0%,100%,.2)}.sidebar.invert a{color:#222;border-bottom-color:rgba(32,32,32,.2);text-decoration-color:rgba(32,32,32,.2)}.sidebar-bg{position:absolute;top:0;left:calc(50% - 50vw);width:100vw;height:100%;background:#202020 center/cover}.sidebar-bg::after{content:"";position:absolute;top:0;left:0;bottom:0;right:0;background:rgba(0,0,0,.05)}.sidebar-bg.sidebar-overlay::after{background:linear-gradient(to bottom, rgba(32, 32, 32, 0) 0%, rgba(32, 32, 32, 0.5) 50%, rgba(32, 32, 32, 0) 100%)}.sidebar-sticky{position:relative;z-index:3;max-width:21rem;padding:1.5rem;contain:content}.sidebar-about .avatar{margin-bottom:1.5rem}.sidebar-about>a.sidebar-title{text-decoration:none}.sidebar-about>a.sidebar-title>h2{margin:0;padding-bottom:.5rem}.sidebar-about>a.sidebar-title::after{content:"";display:block;border-bottom:2px solid;margin:0 auto .5rem;width:4rem;border-color:hsla(0,0%,100%,.2);transition:border-color 250ms}.sidebar-about>a.sidebar-title:hover::after{border-color:#fff;transition:border-color 50ms}.sidebar.invert .sidebar-about>a.sidebar-title::after{border-color:rgba(32,32,32,.2)}.sidebar.invert .sidebar-about>a.sidebar-title:hover::after{border-color:#222}.sidebar-nav>ul{list-style:none;padding-left:0}.sidebar-nav-item{display:inline-block;margin-bottom:.5rem}@media(min-width: 64em){#_main.no-drawer #_menu{display:none}#_main.no-drawer .nav-btn-bar>:nth-child(2){border:none}}.sidebar-social>ul{display:inline-block;list-style:none;padding-left:0;margin-bottom:0}.sidebar-social>ul>li{float:left}.sidebar-social>ul>li>a{display:inline-block;text-align:center;font-size:1.4rem;width:3rem;height:4rem;padding:.5rem 0;line-height:3rem;text-decoration:none;border-bottom-width:2px;border-bottom-style:solid}.sidebar-social>ul li+li{margin-top:0}.fixed-common,.fixed-bottom,.fixed-top{position:fixed;left:0;width:100%;z-index:2}.fixed-top{top:0}.fixed-bottom{bottom:0}.navbar>.content{position:relative;padding-top:0;padding-bottom:0;min-height:0;max-height:5rem}.nav-btn-bar{margin:0 -1rem;background-color:#fff;background-color:var(--body-bg);height:5rem;display:flex;align-items:center;position:relative}.nav-btn-bar>:first-child,.nav-btn-bar>:last-child{border:none}.nav-btn{background:none;border:none;text-decoration:none;display:flex;align-items:center;justify-content:center;width:3.25rem;height:5rem;color:var(--menu-text);border-right:1px solid var(--border-color);border-left:1px solid var(--border-color);margin-left:-1px}#markdown-toc{margin:2rem -1rem 2rem calc(-1rem + 1px);padding-left:2.5rem;padding-bottom:.5rem}#markdown-toc:before{left:1rem}@media screen and (min-width: 104rem){body:not(.no-toc) #markdown-toc{position:absolute;z-index:4;width:20.5rem;right:0;margin:auto;overflow:auto}}@media screen and (min-width: 104rem){body.no-break-layout:not(.no-toc) #markdown-toc{width:calc(50% - 31rem)}}.content{margin-left:auto;margin-right:auto;padding:8rem 1rem 12rem}@media screen{.content{padding-left:1.5rem;min-height:100vh}}@media screen and (min-width: 42em){.content{max-width:42rem}}@media screen and (min-width: 54em){.content{max-width:48rem}}@media screen and (min-width: 64em){.content{padding-left:1rem;margin-left:24rem;margin-right:3rem}}@media screen and (min-width: 86em){.content{padding-top:9rem;margin-left:25rem;margin-right:4rem;max-width:54rem}}@media screen and (min-width: 104rem){.content{margin:auto}}.large-only{display:none}@media screen and (min-width: 104rem){.large-only{display:block}}.avatar{width:7rem;height:7rem;border-radius:100%;overflow:hidden;display:inline-block}.avatar img{width:100%}.content .avatar{float:right;box-sizing:content-box;border:1rem solid var(--body-bg);transition:border-color 1s ease;margin-top:-1.5rem;margin-right:-1rem}.note:before{content:"Note"}.page>header>.note-sm:before,.page>header>.note:before,.page>header>#markdown-toc:before{content:"Description"}#markdown-toc:before{content:"Table of Contents"}.layout-resume .note-sm:before,.layout-resume .note:before,.layout-resume #markdown-toc:before{content:"Summary"} .clearfix,main:not(.layout-resume) .columns::after{content:"";display:table;clear:both}.color-transition,main:not(.layout-resume) .project-card{transition:none}main:not(.layout-resume) .columns{margin-left:-1rem;display:flex;flex-wrap:wrap;contain:content;padding-top:1rem;margin-top:1rem;padding-right:1rem;margin-right:-1rem}main:not(.layout-resume) .column{float:left;padding-left:1rem;margin-bottom:2rem;width:100%;display:flex}@media screen and (min-width: 42em){main:not(.layout-resume) .columns{margin-left:-2rem;margin-right:-2rem}main:not(.layout-resume) .column-1-2{width:50%}}@media screen and (min-width: 104rem){main:not(.layout-resume) .columns-break{width:calc(50vw + 25rem)}main:not(.layout-resume) .columns-break>.column-1-2,main:not(.layout-resume) .columns-break>.column-1{width:27.5rem}}@media print{main:not(.layout-resume) .columns{display:block}main:not(.layout-resume) .column{display:block;width:50%}}main:not(.layout-resume) .project-card{width:100%;color:var(--gray-text);background-color:var(--gray-bg);padding-bottom:1rem;position:relative;overflow:hidden;box-shadow:.125rem .125rem 1rem rgba(0,0,0,.2);contain:content;border-radius:.5rem;page-break-inside:avoid;transition:transform 500ms ease;will-change:transform}main:not(.layout-resume) .project-card:hover{transform:translateY(-0.25rem);transition:transform 250ms ease}main:not(.layout-resume) .project-card>a.flip-project{display:block}main:not(.layout-resume) .project-card>a.flip-project .project-card-img{margin-bottom:0}main:not(.layout-resume) .project-card>a.flip-project .project-card-img img{display:block;border-top-left-radius:.5rem;border-top-right-radius:.5rem}main:not(.layout-resume) .project-card a{position:relative;z-index:1}main:not(.layout-resume) .project-card a.fill-card{position:absolute;top:0;left:0;right:0;bottom:0;z-index:0}main:not(.layout-resume) .project-card>.project-card-title,main:not(.layout-resume) .project-card>.project-card-text{text-align:center;padding:0 1rem}main:not(.layout-resume) .project-card>.project-card-title{display:block;font-size:1.08rem;margin-top:.75rem;margin-bottom:.25rem;color:inherit}main:not(.layout-resume) .project-card>.project-card-text{margin:.25rem 0}main:not(.layout-resume) .column-1>.project-card>.project-card-title{font-size:1.2rem}main:not(.layout-resume) .column-1>.project-card>.project-card-text{font-size:1rem}</style>
<link rel="preload" as="style" href="/assets/css/hydejack-9.2.1.css" id="_stylePreload">
<link rel="preload" as="style" href="/assets/icomoon/style.css" id="_iconsPreload"> <script> setRel('_stylePreload'); setRel('_iconsPreload'); /**/ </script> <noscript>
<link rel="stylesheet" href="/assets/css/hydejack-9.2.1.css">
<link rel="stylesheet" href="/assets/icomoon/style.css"> </noscript>
<style id="_pageStyle"> html{--accent-color: rgb(168, 97, 255);--accent-color-faded: rgba(168, 97, 255, 0.5);--accent-color-highlight: rgba(168, 97, 255, 0.1);--accent-color-darkened: rgb(146.9382911392, 58.75, 255);--theme-color: rgb(8, 0, 18);--dark-mode-body-bg: hsl(266.6666666667, 12.5%, 17.5%);--dark-mode-border-color: hsl(266.6666666667, 12.5%, 22.5%)}</style>
<meta charset="utf-8">
</head>
<body class="no-break-layout"> <script> window._sunrise = 6; window._sunset = 18; ((e,s)=>{var d="light-mode",a="dark-mode",o=(new Date).getHours();"matchMedia"in e&&e.matchMedia("(prefers-color-scheme)")||(e=(o=o<=e._sunrise||o>=e._sunset?a:d)==a?d:a,s.body.classList.add(o),s.body.classList.remove(e))})(window,document); </script> <hy-push-state id="_pushState" replace-selector="#_main" link-selector="a[href]:not([href^='/assets/']):not(.external):not(.no-push-state)" script-selector="script" duration="500" hashchange><div id="_navbar" class="navbar fixed-top"><div class="content"> <span class="sr-only">Jump to:</span><div class="nav-btn-bar"> <a id="_menu" class="nav-btn no-hover" href="#_drawer--opened"> <span class="sr-only">Navigation</span> <span class="icon-menu"></span> </a><div class="nav-span"></div>
</div>
</div></div>
<hr class="sr-only" hidden>
<main id="_main" class="content layout-project" role="main"><nav id="breadcrumbs" class="screen-only"><ul>
<li><a href="/">home</a></li>
<li> <span>/</span> <a href="/projects/">projects</a>
</li>
<li> <span>/</span> <span>discord-quotebot</span>
</li>
</ul></nav><article id="project" class="page mb6" role="article" vocab="http://schema.org/" typeof="CreativeWork" resource="#project"><header><h1 class="page-title" property="name">Quotebot</h1>
<p class="post-date heading"> <span class="ellipsis mr1"> <a href="/projects/" class="flip-title" property="genre">My Experiments</a> | <time datetime="2024-03-02T00:00:00+00:00">2024</time> </span> <span class="ellipsis ml1"> <span class="sr-only">| Links:</span> <span class="icon-link" title="Links"></span> <a class="external" href="https://github.com/dscpsyl/quotebot" property="sameAs" target="_blank" rel="noopener noreferrer">Github Repo</a> </span></p>
<div class="img-wrapper lead aspect-ratio sixteen-nine "> <img src="/assets/img/projects/discord-quotebot-cover.png" sizes="(min-width:90em)48rem,(min-width:54em)42rem,(min-width:42em)38rem,100vw" alt="Quotebot" property="image" width="864" height="486" loading="lazy">
</div>
<p class="note-sm" property="description"> My friends say the darnedest things and I aim to capture them all for eternity.<meta property="disambiguatingDescription" content="For when you need receipts of the group chat."></p></header><ol id="markdown-toc">
<li><a href="#i-like-to-hang-out-with-friends" id="markdown-toc-i-like-to-hang-out-with-friends">I like to Hang Out with Friends</a></li>
<li>
<a href="#the-idea" id="markdown-toc-the-idea">The Idea</a><ol>
<li><a href="#whats-a-discord-bot" id="markdown-toc-whats-a-discord-bot">What’s a Discord Bot?</a></li>
<li><a href="#message-formats" id="markdown-toc-message-formats">Message Formats</a></li>
</ol>
</li>
<li>
<a href="#boring-chores" id="markdown-toc-boring-chores">Boring Chores</a><ol>
<li><a href="#settings" id="markdown-toc-settings">Settings</a></li>
<li><a href="#adding-the-bot" id="markdown-toc-adding-the-bot">Adding the Bot</a></li>
</ol>
</li>
<li>
<a href="#main-functions" id="markdown-toc-main-functions">Main Functions</a><ol>
<li><a href="#quotes" id="markdown-toc-quotes">Quotes</a></li>
<li>
<a href="#editing" id="markdown-toc-editing">Editing</a><ol>
<li><a href="#helper" id="markdown-toc-helper">Helper</a></li>
<li><a href="#author" id="markdown-toc-author">Author</a></li>
<li><a href="#quote" id="markdown-toc-quote">Quote</a></li>
</ol>
</li>
<li>
<a href="#configuration" id="markdown-toc-configuration">Configuration</a><ol>
<li><a href="#prefix" id="markdown-toc-prefix">Prefix</a></li>
<li><a href="#channel" id="markdown-toc-channel">Channel</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#conclusion" id="markdown-toc-conclusion">Conclusion</a></li>
</ol>
<h2 id="i-like-to-hang-out-with-friends">I like to Hang Out with Friends</h2>
<p>I’ll admit it now, I’m not much of a gamer as I use to be. <a href="https://discord.com/" target="_blank" rel="noopener noreferrer">Discord</a> was my home for a time long ago (and maybe it will be soon if their rebrand into the corporate space somehow succeeds), but now I use to remind myself that I need to carve out time for those around me lest I let work consume my waking hours. When I do make time for them, it is a neverending stream of joy, laughter, and the occasional existential crisis. Admist all of this, criminally iconic lines are uttered to the ether, which I find unforgivable. These one-shot lines deserve to be saved reminiscing, a walk down memory lane, or simply future “reference” material. As such, I aimed to create another data-entry front-end for my enjoyment.</p>
<p class="note" title="On the Timeline of It All">Alright alright, I made the basis of this project many many moons ago, but I’ve only recently pushed it to a point where I can be somewhat okay in letting it run amuck in the wild. So if the dates seem wrong, they’re not; I’m just lazy.</p>
<h2 id="the-idea">The Idea</h2>
<p>Since Discord was the go-to platform, it was only natural that I develop something for the server that I was apart of. I didn’t want anything fancy, just something to get the job done. The bot wasn’t doing the heavy lifting, only the decorating. It should be able limited to a specific channel in a Discord server, and the bot should manage the format of the channel automatically. That is, when a user submits a quote, the submission should not clutter the channel itself. Rather, it should be a beautiful wall of quotes and only quotes. This way, all the quotes will be in one place, easily searchable, and can be referenced at any time.</p>
<h3 id="whats-a-discord-bot">What’s a Discord Bot?</h3>
<p>Discord bots are nothing more than web applications that can communicate with Discord’s API. You can read the full documentation on <a href="https://discord.com/developers/docs/intro" target="_blank" rel="noopener noreferrer">Discord’s Developer Documentation</a>. Technically, their official term is called <em>Discord Apps</em>. While their feature set is extensive, this bot will only do the basic of basics: listen for messages, parse them, post them, delete them, and store them. There’s no need for real-time updates, interactions, or anything fancy. With that being said, this project will only scratch the surface of what Discord bots can do. If you want to learn more about the possibilities, I recommend checking out <a href="https://discord.js.org/#/" target="_blank" rel="noopener noreferrer">Discord.js</a> or <a href="https://discordpy.readthedocs.io/en/stable/" target="_blank" rel="noopener noreferrer">Discord.py</a>. While many facor using Javascript, this project will use Python and <a href="https://discordpy.readthedocs.io/en/stable/" target="_blank" rel="noopener noreferrer">Discord.py</a>.</p>
<h3 id="message-formats">Message Formats</h3>
<p>For many reasons, I’ve chosen the <a href="https://owl.purdue.edu/owl/research_and_citation/mla_style/mla_formatting_and_style_guide/mla_formatting_and_style_guide.html" target="_blank" rel="noopener noreferrer">MLA7 Citation Style</a>. Specifically, I wanted the in-text citation style of <strong>“Quote” (Author, Year)</strong>. This gives me all the information I need to filter for the yearly rewind, the ability to see the magnificent creator of the quote, and the said quote itself. Really anything can be in the <code class="language-plaintext highlighter-rouge">Quote</code> part of the message, so linting and input validation are a consideration. The <code class="language-plaintext highlighter-rouge">Author</code> field will be the Discord handle and the <code class="language-plaintext highlighter-rouge">Year</code> should be automatically generated based on when the quote is submitted to the bot.</p>
<p>For the user input, we want it to be as simple as possible. Thus the user should only need to specify two things: the quote itself and the author of the quote. The bot will then take care of the rest. We need to make sure that the author is a Discord user tag, so the author needs to start with teh <code class="language-plaintext highlighter-rouge">@</code> symbol. The bot will be looking for this while parsing the message. Otherwise, any other character should be valid in the quote, as long as it is betwen two quotation marks.</p>
<p>We will be looking for straight quotes, so any curly or styled quotes will not be recognized by the bot. Of course, this is a simple fix, but I have to keep my friends humble. {.note title=”Types of Quotation Marks”}</p>
<p>One final bit on the order of information. Becasue we want to make sure that any type of quote can be submitted, we will enforce the fact that the author is always the last item in the message. This way, any amount of whitespace or other characters can be used, and the entore mesage less the final block of text seperated by a whitespace will be the quote.</p>
<h2 id="boring-chores">Boring Chores</h2>
<p>First things first, you have to get yourself a token for your bot. Login with your Discord account at the <a href="https://discord.com/developers/applications" target="_blank" rel="noopener noreferrer">Discord’s Developer Portal</a> and create a new application. This will give you a bot token that you can use to authenticate your bot with Discord’s API. You can also set the bot’s name, icon, and description here. Write this down now, as if you loose it, you’ll have a world of heacache trying to re-establish the bot.</p>
<p>Also, make sure you have a database instance up and running, ready for your bot to connect to, along with a user for the database, lest you give all your applications admin privileges. For this project, I was really into <a href="https://www.mongodb.com/" target="_blank" rel="noopener noreferrer">MongoDB</a> at the time, so I used that as my database of choice. You can use any database you want, but you’ll have to modify the code a little.</p>
<h3 id="settings">Settings</h3>
<p>For simplicity, we will have a settings file that will hold the configuration for the bot. The main items required here are a predefined bot prefix, the bot token, the channel ID for the quotes, and the database connection, plus the database and collection items (i.e. the database and table) for MongoDB.</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"prefix"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"BotToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ChannelID"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mongoClientID"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"databaseName"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"collectionName"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Later, we’ll see that the prefix is not necessary needed given the channelID already sets an exclusive quote zone. In addition, the prefix is simply the starting prefix that can be tuned later.</p>
<h3 id="adding-the-bot">Adding the Bot</h3>
<p>Back on the <a href="https://discord.com/developers/applications" target="_blank" rel="noopener noreferrer">Discord’s Developer Portal</a>, under <strong>Installation</strong>, you can generate an OAuth2 URL to add the bot to your server. Make sure you select the correct permissions for the bot, such as <code class="language-plaintext highlighter-rouge">Send Messages</code>, <code class="language-plaintext highlighter-rouge">Read Message History</code>, and <code class="language-plaintext highlighter-rouge">Manage Messages</code>. Once you have the URL, you can add the bot to your server.</p>
<h2 id="main-functions">Main Functions</h2>
<p>There are three parts to this bot: the main quote handling functions, the database and quote editing functions, and the general bot configuration functions. However, before any of that, we need to load a bot. For this, we will use the <a href="https://discordpy.readthedocs.io/en/stable/" target="_blank" rel="noopener noreferrer">Discord.py</a> library to create a bot and manage its functionalities. We already have many of the properties set in the settings file, so we can load those in as well. We will also <a href="https://pymongo.readthedocs.io/en/stable/" target="_blank" rel="noopener noreferrer">pymongo</a> to connect to the MongoDB database and manage the quotes. To make developnment easier, let’s also set up logging to keep track of the bot’s activities and have a fallback in case of any async errors.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">json</span>
<span class="kn">import</span> <span class="n">logging</span> <span class="k">as</span> <span class="n">log</span>
<span class="kn">import</span> <span class="n">sys</span>
<span class="kn">from</span> <span class="n">datetime</span> <span class="kn">import</span> <span class="n">date</span>
<span class="kn">from</span> <span class="n">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="n">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="kn">import</span> <span class="n">discord</span>
<span class="kn">import</span> <span class="n">pymongo</span>
<span class="kn">from</span> <span class="n">discord.ext</span> <span class="kn">import</span> <span class="n">commands</span>

<span class="c1"># Loads Settings
</span><span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="sh">"</span><span class="s">settings.json</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">r</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="n">settingsFile</span><span class="p">:</span>
    <span class="n">settings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="n">settingsFile</span><span class="p">)</span>

<span class="c1"># Logging
</span><span class="n">log</span><span class="p">.</span><span class="nf">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">log</span><span class="p">.</span><span class="n">INFO</span><span class="p">)</span>

<span class="c1"># Format the logs
</span><span class="n">logFormat</span> <span class="o">=</span> <span class="n">log</span><span class="p">.</span><span class="nc">Formatter</span><span class="p">(</span>
    <span class="sh">"</span><span class="s">%(asctime)s - %(levelname)s - %(filename)s::%(funcName)s - %(message)s</span><span class="sh">"</span><span class="p">)</span>
<span class="n">rootLogger</span> <span class="o">=</span> <span class="n">log</span><span class="p">.</span><span class="nf">getLogger</span><span class="p">()</span>

<span class="c1"># Handle the logs into a file
</span><span class="n">logFile</span> <span class="o">=</span> <span class="sa">f</span><span class="sh">"</span><span class="s">logs/quotebot-</span><span class="si">{</span><span class="n">datetime</span><span class="p">.</span><span class="nf">now</span><span class="p">().</span><span class="nf">strftime</span><span class="p">(</span><span class="sh">'</span><span class="s">%d-%m-%Y-%H-%M-%S</span><span class="sh">'</span><span class="p">)</span><span class="si">}</span><span class="s">.log</span><span class="sh">"</span>
<span class="nc">Path</span><span class="p">(</span><span class="n">logFile</span><span class="p">).</span><span class="nf">touch</span><span class="p">(</span><span class="n">exist_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">fileLogger</span> <span class="o">=</span> <span class="n">log</span><span class="p">.</span><span class="nc">FileHandler</span><span class="p">(</span><span class="n">logFile</span><span class="p">)</span>
<span class="n">fileLogger</span><span class="p">.</span><span class="nf">setFormatter</span><span class="p">(</span><span class="n">logFormat</span><span class="p">)</span>
<span class="n">rootLogger</span><span class="p">.</span><span class="nf">addHandler</span><span class="p">(</span><span class="n">fileLogger</span><span class="p">)</span>

<span class="c1"># Handle the logs into the console
</span><span class="n">consoleLogger</span> <span class="o">=</span> <span class="n">log</span><span class="p">.</span><span class="nc">StreamHandler</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">stdout</span><span class="p">)</span>
<span class="n">consoleLogger</span><span class="p">.</span><span class="nf">setFormatter</span><span class="p">(</span><span class="n">logFormat</span><span class="p">)</span>
<span class="n">rootLogger</span><span class="p">.</span><span class="nf">addHandler</span><span class="p">(</span><span class="n">consoleLogger</span><span class="p">)</span>

<span class="c1"># Set the premissions for the bot
</span><span class="n">intents</span><span class="p">:</span> <span class="n">discord</span><span class="p">.</span><span class="n">Intents</span> <span class="o">=</span> <span class="n">discord</span><span class="p">.</span><span class="n">Intents</span><span class="p">.</span><span class="nf">default</span><span class="p">()</span>
<span class="n">intents</span><span class="p">.</span><span class="n">message_content</span> <span class="o">=</span> <span class="bp">True</span>

<span class="c1"># Loads Bot
</span><span class="n">bot</span> <span class="o">=</span> <span class="n">commands</span><span class="p">.</span><span class="nc">Bot</span><span class="p">(</span><span class="n">command_prefix</span><span class="o">=</span><span class="n">settings</span><span class="p">[</span><span class="sh">"</span><span class="s">prefix</span><span class="sh">"</span><span class="p">],</span>
                   <span class="n">intents</span><span class="o">=</span><span class="n">intents</span><span class="p">,</span>
                   <span class="n">help_command</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>

<span class="c1"># Loads db
</span><span class="n">myclient</span><span class="p">:</span> <span class="n">pymongo</span><span class="p">.</span><span class="n">MongoClient</span> <span class="o">=</span> <span class="n">pymongo</span><span class="p">.</span><span class="nc">MongoClient</span><span class="p">(</span><span class="n">settings</span><span class="p">[</span><span class="sh">"</span><span class="s">mongoClientID</span><span class="sh">"</span><span class="p">]</span> <span class="o">+</span> <span class="n">settings</span><span class="p">[</span><span class="sh">"</span><span class="s">databaseName</span><span class="sh">"</span><span class="p">])</span>
<span class="n">mydb</span> <span class="o">=</span> <span class="n">myclient</span><span class="p">.</span><span class="nf">get_default_database</span><span class="p">()</span>
<span class="n">mycol</span> <span class="o">=</span> <span class="n">mydb</span><span class="p">[</span><span class="n">settings</span><span class="p">[</span><span class="sh">"</span><span class="s">collectionName</span><span class="sh">"</span><span class="p">]]</span>

<span class="c1"># Set the quote number to the last quote number in the database
</span><span class="n">no</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">mycol</span><span class="p">.</span><span class="nf">find</span><span class="p">({},</span> <span class="p">{</span><span class="sh">"</span><span class="s">_id</span><span class="sh">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">}).</span><span class="nf">sort</span><span class="p">(</span><span class="sh">"</span><span class="s">_id</span><span class="sh">"</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">).</span><span class="nf">limit</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">no</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">doc</span><span class="p">[</span><span class="sh">"</span><span class="s">_id</span><span class="sh">"</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
</code></pre></div></div>
<p>To run the bot, we can run <code class="language-plaintext highlighter-rouge">bot.run(settings["BotToken"])</code> at the end of the file once all functions have been defined. This will initialize the bot to the Discord servers with the token we’ve been given. If you were to start this now, you should see the bot show as <em>online</em> in your server, but it won’t do anything. Let’s make it do something.</p>
<h3 id="quotes">Quotes</h3>
<p>To interact with the bot, we will need to define functions for <code class="language-plaintext highlighter-rouge">events</code> that the bot will listen for. Thankfully, our defined <code class="language-plaintext highlighter-rouge">bot</code> object has a built-in decorator <code class="language-plaintext highlighter-rouge">bot.event</code> for us to use. For this bot, there are two functions that we will need to overload in this decorator: <code class="language-plaintext highlighter-rouge">on_ready</code> and <code class="language-plaintext highlighter-rouge">on_message</code>. The first will be called when the bot is ready to start receiving messages, and the second will be called when a message is sent in the server. For now, let’s say that when the bot is up and ready, it’ll simply log it. We’ll also update the global quote number from ealier.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@bot.event</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">on_ready</span><span class="p">():</span>
  <span class="k">global</span> <span class="n">no</span>
  <span class="n">log</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span>
      <span class="sa">f</span><span class="sh">'</span><span class="si">{</span><span class="n">bot</span><span class="p">.</span><span class="n">user</span><span class="si">}</span><span class="s"> is connected and has the db of: </span><span class="si">{</span><span class="nf">str</span><span class="p">(</span><span class="nf">str</span><span class="p">(</span><span class="n">mydb</span><span class="p">).</span><span class="nf">split</span><span class="p">(</span><span class="sh">"</span><span class="s"> </span><span class="sh">"</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="si">:</span><span class="p">])[</span><span class="mi">2</span><span class="si">:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span><span class="si">}</span><span class="s"> with collection: </span><span class="si">{</span><span class="nf">str</span><span class="p">(</span><span class="nf">str</span><span class="p">(</span><span class="n">mycol</span><span class="p">).</span><span class="nf">split</span><span class="p">(</span><span class="sh">"</span><span class="s"> </span><span class="sh">"</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="si">:</span><span class="p">])[</span><span class="mi">2</span><span class="si">:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span><span class="si">}</span><span class="sh">'</span>
  <span class="p">)</span>
  <span class="n">log</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Initalized quote number: </span><span class="si">{</span><span class="n">no</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div>
<p>Now for the fun part in <code class="language-plaintext highlighter-rouge">on_message</code>. This function will be called every time a message is sent to the server. It is our job now to see if there is anything we need to do. As I’ve mentioned before, the prefix will not be used as long as the channel is defined. That is true, for quotes. For other functionalities, we need to parse the prefix to redirect the command to the right function. We’ll save this discussion for later. For now, let’s simply use the bot’s built in function to parse it like a command if we see the prefix. Because this function will be called for every message, we also need to check if the message is sent to the correct channel (i.e., the quotes channel). Finally, to prevent a positive feedback loop, we will also ignore messages sent by the bot itself, otherwise we will recurs into infinity.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@bot.event</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">on_message</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n">discord</span><span class="p">.</span><span class="n">Message</span><span class="p">):</span>

  <span class="c1"># Check for command prefixes and process commands
</span>  <span class="n">prefix</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="sh">"</span><span class="s">prefix</span><span class="sh">"</span><span class="p">]</span>
  <span class="k">if</span> <span class="n">message</span><span class="p">.</span><span class="n">content</span><span class="p">.</span><span class="nf">startswith</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span>
    <span class="k">await</span> <span class="n">bot</span><span class="p">.</span><span class="nf">process_commands</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
    <span class="k">return</span>

  <span class="k">global</span> <span class="n">no</span>  <span class="c1"># global quote number
</span>
  <span class="c1"># Check of the message is in the channel we are looking for
</span>  <span class="n">channelWatch</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="sh">"</span><span class="s">ChannelID</span><span class="sh">"</span><span class="p">]</span>
  <span class="k">if</span> <span class="nf">str</span><span class="p">(</span><span class="n">message</span><span class="p">.</span><span class="n">channel</span><span class="p">.</span><span class="nb">id</span><span class="p">)</span> <span class="o">!=</span> <span class="n">channelWatch</span><span class="p">:</span>
    <span class="k">return</span>

  <span class="c1"># Check if the message is from the bot
</span>  <span class="k">if</span> <span class="n">message</span><span class="p">.</span><span class="n">author</span> <span class="o">==</span> <span class="n">bot</span><span class="p">.</span><span class="n">user</span><span class="p">:</span>
    <span class="k">return</span>
</code></pre></div></div>
<p>Now, let’s make sure that there is only one mention in the message; this will be the author of the quote. If there is more or less than one mention, we will ask the user to retry the quote submission. If there is only one mention, we will extract the author of the quote, as well as the submitter of the quote for the database later on.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">authorList</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="n">message</span><span class="p">.</span><span class="n">mentions</span>
  <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">authorList</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="nf">len</span><span class="p">(</span><span class="n">authorList</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">message</span><span class="p">.</span><span class="nf">delete</span><span class="p">()</span>
    <span class="k">await</span> <span class="n">message</span><span class="p">.</span><span class="n">channel</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span>
      <span class="sa">f</span><span class="sh">"</span><span class="s">Error: Please only specify one author for this quote at this time we found </span><span class="si">{</span><span class="nf">len</span><span class="p">(</span><span class="n">authorList</span><span class="p">)</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="p">[</span><span class="n">user</span><span class="p">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">authorList</span><span class="p">]</span><span class="si">}</span><span class="s"> in quote: </span><span class="si">{</span><span class="n">message</span><span class="p">.</span><span class="n">content</span><span class="si">}</span><span class="s">.</span><span class="sh">"</span><span class="p">,</span>
      <span class="n">delete_after</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">log</span><span class="p">.</span><span class="nf">warning</span><span class="p">(</span>
      <span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">message</span><span class="p">.</span><span class="n">author</span><span class="si">}</span><span class="s"> tried to add a quote with </span><span class="si">{</span><span class="nf">len</span><span class="p">(</span><span class="n">authorList</span><span class="p">)</span><span class="si">}</span><span class="s"> authors: </span><span class="si">{</span><span class="p">[</span><span class="n">user</span><span class="p">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">authorList</span><span class="p">]</span><span class="si">}</span><span class="s"> and content: </span><span class="si">{</span><span class="n">message</span><span class="p">.</span><span class="n">content</span><span class="si">}</span><span class="sh">"</span>
    <span class="p">)</span>
    <span class="k">return</span>
<span class="n">quoteAuthor</span><span class="p">:</span> <span class="n">discord</span><span class="p">.</span><span class="n">Member</span> <span class="o">=</span> <span class="n">authorList</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">quoteSender</span><span class="p">:</span> <span class="n">discord</span><span class="p">.</span><span class="n">User</span> <span class="o">|</span> <span class="n">discord</span><span class="p">.</span><span class="n">Member</span> <span class="o">=</span> <span class="n">message</span><span class="p">.</span><span class="n">author</span>

<span class="c1"># Get a mentionable string for the author
</span><span class="n">authorMentionString</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">quoteAuthor</span><span class="p">.</span><span class="n">mention</span>
</code></pre></div></div>
<p>With the author sorted, let’s turn our attention to the quote itself. As mentioned earlier, the last item in the message itself will be the author. Everything else will be the quote itself. The reason we didn’t parse the author out of the message content itself is becasue the content does not have the right Discord user slug format. Without it, any <code class="language-plaintext highlighter-rouge">@</code>s will have no reference and simply be plain text. Thus, the necessity to extract the author from the <code class="language-plaintext highlighter-rouge">mentions</code>. Now, we can simply extract the content minus the last item to form the quote.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Get the content of the message and make sure the citation is at the end of the message
</span><span class="n">quoteContent</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span> <span class="o">=</span> <span class="n">message</span><span class="p">.</span><span class="n">content</span>
<span class="n">quoteContent</span> <span class="o">=</span> <span class="n">quoteContent</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sh">"</span><span class="s"> </span><span class="sh">"</span><span class="p">)</span>
<span class="n">quote</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="sh">"</span><span class="s"> </span><span class="sh">"</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">quoteContent</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="k">if</span> <span class="n">quoteContent</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="n">authorMentionString</span><span class="p">:</span>
  <span class="k">await</span> <span class="n">message</span><span class="p">.</span><span class="nf">delete</span><span class="p">()</span>
  <span class="k">await</span> <span class="n">message</span><span class="p">.</span><span class="n">channel</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span>
    <span class="sa">f</span><span class="sh">"</span><span class="s">Error: Please make sure to mention the author at the end of the quote For example: </span><span class="si">{</span><span class="n">quote</span><span class="si">}</span><span class="s"> @citation.</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">delete_after</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span>
  <span class="p">)</span>
  <span class="n">log</span><span class="p">.</span><span class="nf">warning</span><span class="p">(</span>
    <span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">message</span><span class="p">.</span><span class="n">author</span><span class="si">}</span><span class="s"> tried to add a quote without mentioning the author at the end of the quote: </span><span class="si">{</span><span class="n">quote</span><span class="si">}</span><span class="sh">"</span>
  <span class="p">)</span>
  <span class="k">return</span>
</code></pre></div></div>
<p>Finally, we will add the year to the quote.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Get's current year for citationå
</span><span class="n">today</span><span class="p">:</span> <span class="n">date</span> <span class="o">=</span> <span class="n">date</span><span class="p">.</span><span class="nf">today</span><span class="p">()</span>
<span class="n">time</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="nf">now</span><span class="p">()</span>
<span class="n">time</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">strftime</span><span class="p">(</span><span class="sh">"</span><span class="s">%H:%M:%S</span><span class="sh">"</span><span class="p">)</span>
<span class="n">year</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">today</span><span class="p">.</span><span class="n">year</span>
</code></pre></div></div>
<p>A small side step. Discord has some basic <code class="language-plaintext highlighter-rouge">*</code> markdown formatting, and we will be utilizing it to format the final quote for the channel. As such, we will need to make sure any quote that already contains <code class="language-plaintext highlighter-rouge">*</code> is escaped so as to not mess up the formatting.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Sanitize the quote to prevent * from messing up the formatting
</span><span class="n">sanitizedQuote</span> <span class="o">=</span> <span class="n">quote</span><span class="p">.</span><span class="nf">replace</span><span class="p">(</span><span class="sh">"</span><span class="s">*</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="se">\\</span><span class="s">*</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div>
<p>Now we can construct the full quote message</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Sends formatted message &amp; cleans up
</span><span class="n">fullQuote</span> <span class="o">=</span> <span class="p">(</span><span class="nf">str</span><span class="p">(</span><span class="n">no</span><span class="p">)</span> <span class="o">+</span> <span class="sh">"</span><span class="s">: </span><span class="sh">"</span>
            <span class="sh">'</span><span class="s">***</span><span class="sh">"'</span> <span class="o">+</span> <span class="n">sanitizedQuote</span> <span class="o">+</span> <span class="sh">'"'</span> <span class="o">+</span> <span class="sh">"</span><span class="s">.*** `(`</span><span class="sh">"</span> <span class="o">+</span>
            <span class="n">authorMentionString</span> <span class="o">+</span> <span class="sh">"</span><span class="s">`, </span><span class="sh">"</span> <span class="o">+</span> <span class="nf">str</span><span class="p">(</span><span class="n">year</span><span class="p">)</span> <span class="o">+</span> <span class="sh">"</span><span class="s">)`</span><span class="sh">"</span><span class="p">)</span>
<span class="n">quote_message</span> <span class="o">=</span> <span class="k">await</span> <span class="n">message</span><span class="p">.</span><span class="n">channel</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="n">fullQuote</span><span class="p">)</span>
<span class="n">jumpURL</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">quote_message</span><span class="p">.</span><span class="n">jump_url</span>
<span class="k">await</span> <span class="n">message</span><span class="p">.</span><span class="nf">delete</span><span class="p">()</span>
<span class="c1"># Invisible character for double spacing
</span><span class="k">await</span> <span class="n">message</span><span class="p">.</span><span class="n">channel</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="sh">"</span><span class="se">\u3164</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div>
<p>To wrap everything up, we will take the data we’ve gathered and store it into the database and increase the global quote number. The database will include the quote number, the quote itself, the author, the submitter, the time, the date, and the jump URL for the quote message (which was retrieved in the code block above). The jump URL is a link to the message itself, which can be used to reference the quote later on.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Write to Database
</span><span class="n">mycol</span><span class="p">.</span><span class="nf">insert_one</span><span class="p">({</span>
  <span class="sh">"</span><span class="s">_id</span><span class="sh">"</span><span class="p">:</span> <span class="n">no</span><span class="p">,</span>
  <span class="sh">"</span><span class="s">quote</span><span class="sh">"</span><span class="p">:</span> <span class="n">quote</span><span class="p">,</span>
  <span class="sh">"</span><span class="s">author</span><span class="sh">"</span><span class="p">:</span> <span class="nf">str</span><span class="p">(</span><span class="n">quoteAuthor</span><span class="p">),</span>
  <span class="sh">"</span><span class="s">sender</span><span class="sh">"</span><span class="p">:</span> <span class="nf">str</span><span class="p">(</span><span class="n">quoteSender</span><span class="p">),</span>
  <span class="sh">"</span><span class="s">time</span><span class="sh">"</span><span class="p">:</span> <span class="nf">str</span><span class="p">(</span><span class="n">time</span><span class="p">),</span>
  <span class="sh">"</span><span class="s">day</span><span class="sh">"</span><span class="p">:</span> <span class="nf">str</span><span class="p">(</span><span class="n">today</span><span class="p">),</span>
  <span class="sh">"</span><span class="s">url</span><span class="sh">"</span><span class="p">:</span> <span class="nf">str</span><span class="p">(</span><span class="n">jumpURL</span><span class="p">),</span>
<span class="p">})</span>

<span class="c1"># print to console
</span><span class="n">log</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span>
  <span class="sa">f</span><span class="sh">'</span><span class="s">Added quote no: </span><span class="si">{</span><span class="n">no</span><span class="si">}</span><span class="s"> to database: </span><span class="sh">"</span><span class="si">{</span><span class="n">quote</span><span class="si">}</span><span class="sh">"</span><span class="s">, </span><span class="si">{</span><span class="n">quoteAuthor</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s"> from </span><span class="si">{</span><span class="n">quoteSender</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">. `</span><span class="si">{</span><span class="nf">str</span><span class="p">(</span><span class="n">jumpURL</span><span class="p">)</span><span class="si">}</span><span class="s">`</span><span class="sh">'</span>
<span class="p">)</span>

<span class="n">no</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div></div>
<p>While I haven’t explicitly mentioned it, you’ll notice that for any error or completion of task, the bot will delete the message sent by the user. This is the cleanup management that I mentioned at the beginning. You’ll see this throughout the bot, ensuring that the task is completed before clearing the message. This way, no data is lost in case of error, and cleanup is very low on priority. {.note title=”Message Cleanups”}</p>
<h3 id="editing">Editing</h3>
<p>For editing previous quotes, we will define two options: the quote itself, and the author of a quote. The command format will be <code class="language-plaintext highlighter-rouge">&lt;prefix&gt;e author &lt;quote number&gt; &lt;new author&gt;</code> or <code class="language-plaintext highlighter-rouge">&lt;prefix&gt;e quote &lt;quote number&gt; &lt;new quote&gt;</code>. Let’s define a main edit function to handle the command call. We will check the format and validity of the command and send the result to the correct editing functions.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># ? Args0 will be option of edit | args1 will be quote to edit
</span><span class="nd">@bot.command</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">e</span><span class="sh">"</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="sh">"</span><span class="s">Edits previous quotes in database</span><span class="sh">"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">edit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
  <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="n">message</span><span class="p">.</span><span class="nf">delete</span><span class="p">()</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span>
        <span class="sh">"</span><span class="s">Error: No arguments supplied. The current available options are: |author|, |quote|.</span><span class="sh">"</span><span class="p">,</span>
        <span class="n">delete_after</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span>

  <span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sh">"</span><span class="s">author</span><span class="sh">"</span><span class="p">:</span>
    <span class="k">await</span> <span class="nf">authorEdit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">mycol</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
    <span class="n">log</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Author edit: </span><span class="si">{</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
  <span class="k">elif</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sh">"</span><span class="s">quote</span><span class="sh">"</span><span class="p">:</span>
    <span class="k">await</span> <span class="nf">quoteEdit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">mycol</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
    <span class="n">log</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Quote edit: </span><span class="si">{</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="n">message</span><span class="p">.</span><span class="nf">delete</span><span class="p">()</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="sh">"</span><span class="s">Error: That is not a current valid editing opiton</span><span class="sh">"</span><span class="p">,</span>
                    <span class="n">delete_after</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</code></pre></div></div>
<h4 id="helper">Helper</h4>
<p>For the edit commands, we will need to reach into the database to find the quote jump url we want to edit, so we can update the channel’s message. Thus, a simple function to return the quote jump url given the quote number and collection will be useful. <em>Discord.py</em> expects only the jump ID and not the full URL, we will only return that part.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#fetches data for the old message to be edited 
</span><span class="k">def</span> <span class="nf">orgMsgFind</span><span class="p">(</span><span class="n">mycol</span><span class="p">,</span><span class="n">idxNo</span><span class="p">):</span>
  <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">mycol</span><span class="p">.</span><span class="nf">find</span><span class="p">({</span><span class="sh">"</span><span class="s">_id</span><span class="sh">"</span><span class="p">:</span><span class="nf">int</span><span class="p">(</span><span class="n">idxNo</span><span class="p">)}):</span>
    <span class="k">return</span> <span class="n">entry</span><span class="p">[</span><span class="sh">'</span><span class="s">url</span><span class="sh">'</span><span class="p">].</span><span class="nf">split</span><span class="p">(</span><span class="sh">'</span><span class="s">/</span><span class="sh">'</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</code></pre></div></div>
<h4 id="author">Author</h4>
<p>To edit the author, we retrieve the new author information, update the database and channel, and log it. Gathering the new author information is the same as a new quote. Updating the database is also simple enough. Updating the channel message requires fetching the message using the jump URL, replacing the old author with the new author, and then sending the updated message. Finally, as a curtsey, we will delete the edit message to keep the channel clean.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">async</span> <span class="k">def</span> <span class="nf">authorEdit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span><span class="n">mycol</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
  <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="n">message</span><span class="p">.</span><span class="nf">delete</span><span class="p">()</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="sh">"</span><span class="s">Error: The arguments are incorrect. The format is: </span><span class="se">\"</span><span class="s">e author [Quote Index No.] [New Author Tag]</span><span class="sh">"</span><span class="p">,</span> <span class="n">delete_after</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="k">return</span>
      
  <span class="c1">#Gets new Author Information
</span>  <span class="n">newAuthorID</span> <span class="o">=</span> <span class="n">ctx</span><span class="p">.</span><span class="n">message</span><span class="p">.</span><span class="n">content</span><span class="p">[</span><span class="n">ctx</span><span class="p">.</span><span class="n">message</span><span class="p">.</span><span class="n">content</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="sh">'</span><span class="s">&lt;</span><span class="sh">'</span><span class="p">):</span><span class="n">ctx</span><span class="p">.</span><span class="n">message</span><span class="p">.</span><span class="n">content</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="sh">'</span><span class="s">&gt;</span><span class="sh">'</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
  <span class="n">newAuthor</span> <span class="o">=</span> <span class="n">ctx</span><span class="p">.</span><span class="n">message</span><span class="p">.</span><span class="n">mentions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
      
  <span class="c1">#Updates Database
</span>  <span class="n">result</span> <span class="o">=</span> <span class="n">mycol</span><span class="p">.</span><span class="nf">update_one</span><span class="p">({</span><span class="sh">"</span><span class="s">_id</span><span class="sh">"</span><span class="p">:</span><span class="nf">int</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])},{</span><span class="sh">"</span><span class="s">$set</span><span class="sh">"</span><span class="p">:{</span><span class="sh">"</span><span class="s">author</span><span class="sh">"</span><span class="p">:</span><span class="nf">str</span><span class="p">(</span><span class="n">newAuthor</span><span class="p">)}})</span>
  <span class="k">if</span> <span class="n">result</span><span class="p">.</span><span class="n">acknowledged</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Updated the author of quote </span><span class="si">{</span><span class="nf">str</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="si">}</span><span class="s"> to </span><span class="si">{</span><span class="nf">str</span><span class="p">(</span><span class="n">newAuthor</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">,</span> <span class="n">delete_after</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="sh">"</span><span class="s">Error: Failed to update quote.</span><span class="sh">"</span><span class="p">)</span>
      
  <span class="c1">#Update Visible Book 
</span>  <span class="n">quoteID</span> <span class="o">=</span> <span class="nf">orgMsgFind</span><span class="p">(</span><span class="n">mycol</span><span class="p">,</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
  <span class="n">orgMsg</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="n">channel</span><span class="p">.</span><span class="nf">fetch_message</span><span class="p">(</span><span class="n">quoteID</span><span class="p">)</span> 
  <span class="n">oldAuthorID</span> <span class="o">=</span> <span class="n">orgMsg</span><span class="p">.</span><span class="n">content</span><span class="p">[</span><span class="n">orgMsg</span><span class="p">.</span><span class="n">content</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="sh">'</span><span class="s">&lt;</span><span class="sh">'</span><span class="p">):</span><span class="n">orgMsg</span><span class="p">.</span><span class="n">content</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="sh">'</span><span class="s">&gt;</span><span class="sh">'</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
  <span class="n">newMsg</span> <span class="o">=</span> <span class="nf">str</span><span class="p">(</span><span class="n">orgMsg</span><span class="p">.</span><span class="n">content</span><span class="p">).</span><span class="nf">replace</span><span class="p">(</span><span class="n">oldAuthorID</span><span class="p">,</span><span class="n">newAuthorID</span><span class="p">)</span>
  <span class="k">await</span> <span class="n">orgMsg</span><span class="p">.</span><span class="nf">edit</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">newMsg</span><span class="p">)</span>
              
  <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="n">message</span><span class="p">.</span><span class="nf">delete</span><span class="p">()</span>
</code></pre></div></div>
<h4 id="quote">Quote</h4>
<p>Updating the old quote is very similar to updating the author. The databbase update and jump url fetch is the same. To update the channel message, we will take advantage of the fact that the quote is always between two <code class="language-plaintext highlighter-rouge">"</code> characters. Thus, we simply replace the content between the first and last <code class="language-plaintext highlighter-rouge">"</code> characters with the new quote.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">async</span> <span class="k">def</span> <span class="nf">quoteEdit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span><span class="n">mycol</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
  <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="n">message</span><span class="p">.</span><span class="nf">delete</span><span class="p">()</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="sh">"</span><span class="s">Error: The arguments are incorrect. The format is: </span><span class="se">\"</span><span class="s">e author [Quote Index No.] </span><span class="se">\"</span><span class="s">[New Quote]</span><span class="se">\"</span><span class="sh">"</span><span class="p">,</span> <span class="n">delete_after</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="k">return</span>    
  
  <span class="n">newQuote</span> <span class="o">=</span> <span class="nf">str</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

  <span class="n">result</span> <span class="o">=</span> <span class="n">mycol</span><span class="p">.</span><span class="nf">update_one</span><span class="p">({</span><span class="sh">"</span><span class="s">_id</span><span class="sh">"</span><span class="p">:</span><span class="nf">int</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])},{</span><span class="sh">"</span><span class="s">$set</span><span class="sh">"</span><span class="p">:{</span><span class="sh">"</span><span class="s">quote</span><span class="sh">"</span><span class="p">:</span><span class="nf">str</span><span class="p">(</span><span class="n">newQuote</span><span class="p">)}})</span>
  <span class="k">if</span> <span class="n">result</span><span class="p">.</span><span class="n">acknowledged</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Updated the quote of quote </span><span class="si">{</span><span class="nf">str</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="si">}</span><span class="s"> to </span><span class="si">{</span><span class="nf">str</span><span class="p">(</span><span class="n">newQuote</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">,</span> <span class="n">delete_after</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="sh">"</span><span class="s">Error: Failed to update quote.</span><span class="sh">"</span><span class="p">)</span>
  
  <span class="n">quoteID</span> <span class="o">=</span> <span class="nf">orgMsgFind</span><span class="p">(</span><span class="n">mycol</span><span class="p">,</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
  <span class="n">orgMsg</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="n">channel</span><span class="p">.</span><span class="nf">fetch_message</span><span class="p">(</span><span class="n">quoteID</span><span class="p">)</span> 
  <span class="n">quotePOS</span> <span class="o">=</span> <span class="p">[</span><span class="n">pos</span> <span class="k">for</span> <span class="n">pos</span><span class="p">,</span> <span class="n">char</span> <span class="ow">in</span> <span class="nf">enumerate</span><span class="p">(</span><span class="n">orgMsg</span><span class="p">.</span><span class="n">content</span><span class="p">)</span> <span class="k">if</span> <span class="n">char</span> <span class="o">==</span> <span class="sh">'"'</span><span class="p">]</span>
  <span class="n">oldQuote</span> <span class="o">=</span> <span class="n">orgMsg</span><span class="p">.</span><span class="n">content</span><span class="p">[</span><span class="n">quotePOS</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span><span class="n">quotePOS</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
  <span class="n">newMsg</span> <span class="o">=</span> <span class="nf">str</span><span class="p">(</span><span class="n">orgMsg</span><span class="p">.</span><span class="n">content</span><span class="p">).</span><span class="nf">replace</span><span class="p">(</span><span class="n">oldQuote</span><span class="p">,</span><span class="n">newQuote</span><span class="p">)</span>
  <span class="k">await</span> <span class="n">orgMsg</span><span class="p">.</span><span class="nf">edit</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">newMsg</span><span class="p">)</span>   
  
  <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="n">message</span><span class="p">.</span><span class="nf">delete</span><span class="p">()</span>
</code></pre></div></div>
<h3 id="configuration">Configuration</h3>
<p>There is little configuration for this simple bot. We will define two configurations that can be changed: the prefix, and the channel ID. It should be noted that because these commands use a prefix, they are not bound to a specific channel and can be called anywhere in the server. In fact, they should be called somewhere other than the quotes channel to ensure everything is clean and tidy.</p>
<h4 id="prefix">Prefix</h4>
<p>The prefix can be set to anything. So the command format we will define here is <code class="language-plaintext highlighter-rouge">&lt;prefix&gt;p &lt;new prefix&gt;</code>. This will change the prefix for the bot to the new prefix. Of course, let’s also do some bounds checking here to ensure that the command in given correctly. If the command is sent in the quotes channel, we’ll be kind and remove the command message to help with tidyness. Finally, let’s save this change to the settings file so that it persists across bot restarts.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@bot.command</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">p</span><span class="sh">"</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="sh">"</span><span class="s">Set the prefix of quote</span><span class="sh">"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">prefixSetting</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
  <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="n">message</span><span class="p">.</span><span class="nf">delete</span><span class="p">()</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="sh">"</span><span class="s">Error: No arguments supplied.</span><span class="sh">"</span><span class="p">)</span>
    <span class="k">return</span>
  <span class="k">elif</span> <span class="nf">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="n">message</span><span class="p">.</span><span class="nf">delete</span><span class="p">()</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="sh">"</span><span class="s">Error: Please input only one prefix</span><span class="sh">"</span><span class="p">)</span>
    <span class="k">return</span>

  <span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sh">""</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="n">message</span><span class="p">.</span><span class="nf">delete</span><span class="p">()</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="sh">"</span><span class="s">Error: Please input a valid prefix</span><span class="sh">"</span><span class="p">)</span>
    <span class="k">return</span>

  <span class="c1"># Keep the quote channel clean
</span>  <span class="k">if</span> <span class="nf">str</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">message</span><span class="p">.</span><span class="n">channel</span><span class="p">.</span><span class="nb">id</span><span class="p">)</span> <span class="o">==</span> <span class="n">settings</span><span class="p">[</span><span class="sh">"</span><span class="s">ChannelID</span><span class="sh">"</span><span class="p">]:</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="n">message</span><span class="p">.</span><span class="nf">delete</span><span class="p">()</span>

  <span class="n">bot</span><span class="p">.</span><span class="n">command_prefix</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
  <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Updated prefix to </span><span class="si">{</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s">!</span><span class="sh">"</span><span class="p">,</span> <span class="n">delete_after</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
  <span class="n">log</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Updated prefix to </span><span class="si">{</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s">!</span><span class="sh">"</span><span class="p">)</span>

  <span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="sh">"</span><span class="s">settings.json</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">r+</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="n">settingsFile</span><span class="p">:</span>
    <span class="n">settingsData</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="n">settingsFile</span><span class="p">)</span>
    <span class="n">settingsData</span><span class="p">[</span><span class="sh">"</span><span class="s">prefix</span><span class="sh">"</span><span class="p">]</span> <span class="o">=</span> <span class="nf">str</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">settingsFile</span><span class="p">.</span><span class="nf">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">json</span><span class="p">.</span><span class="nf">dump</span><span class="p">(</span><span class="n">settingsData</span><span class="p">,</span> <span class="n">settingsFile</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
    <span class="n">settingsFile</span><span class="p">.</span><span class="nf">truncate</span><span class="p">()</span>
</code></pre></div></div>
<h4 id="channel">Channel</h4>
<p>The channel ID is a little more complex. While the command is still simple, <code class="language-plaintext highlighter-rouge">&lt;prefix&gt;c &lt;channel ID&gt;</code>, we will need to extract the tagged channel ID to ensure we have the correct reference. However, once the format is identified, we can simply remove any unnecessary characters as all we are looking for is the channel ID itself. We will do the usual bounds checking, setting files update, and the cleanup as necessary.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@bot.command</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">c</span><span class="sh">"</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="sh">"</span><span class="s">Change the channel that the quotebot listens in</span><span class="sh">"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">channelChange</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
  <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="n">message</span><span class="p">.</span><span class="nf">delete</span><span class="p">()</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span>
      <span class="sh">"</span><span class="s">Error: please tag only one channel that will be the quote channel.</span><span class="sh">"</span>
    <span class="p">)</span>

  <span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">ctx</span><span class="p">.</span><span class="n">message</span><span class="p">.</span><span class="n">channel</span><span class="p">.</span><span class="n">mention</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="n">message</span><span class="p">.</span><span class="nf">delete</span><span class="p">()</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="sh">"</span><span class="s">Error: Please tag the channel with the # symbol.</span><span class="sh">"</span><span class="p">)</span>
    <span class="k">return</span>

  <span class="c1"># Get the channel ID from the arg
</span>  <span class="n">newChannelID</span> <span class="o">=</span> <span class="nf">str</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
  <span class="n">settings</span><span class="p">[</span><span class="sh">"</span><span class="s">ChannelID</span><span class="sh">"</span><span class="p">]</span> <span class="o">=</span> <span class="n">newChannelID</span>

  <span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="sh">"</span><span class="s">settings.json</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">w</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="n">settingsFile</span><span class="p">:</span>
    <span class="n">settingsFile</span><span class="p">.</span><span class="nf">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">json</span><span class="p">.</span><span class="nf">dump</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="n">settingsFile</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
    <span class="n">settingsFile</span><span class="p">.</span><span class="nf">truncate</span><span class="p">()</span>

  <span class="c1"># Keep the quote channel clean
</span>  <span class="k">if</span> <span class="nf">str</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">message</span><span class="p">.</span><span class="n">channel</span><span class="p">.</span><span class="nb">id</span><span class="p">)</span> <span class="o">==</span> <span class="n">newChannelID</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="n">message</span><span class="p">.</span><span class="nf">delete</span><span class="p">()</span>

  <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Updated the listening channel to </span><span class="si">{</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s">!</span><span class="sh">"</span><span class="p">,</span>
                  <span class="n">delete_after</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
  <span class="n">log</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Updated the listening channel to </span><span class="si">{</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s">!</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div>
<h2 id="conclusion">Conclusion</h2>
<p>And that’s it! A simple record keeper bot for you and your friends! While I’ve ventured less and less onto Discord itself, I still find myself using this bot to capture IRL moments in a swift fashion. It allows me to give a Spotify-wrapped-esque gift to everyone as my obligatory Christmas White Elephant entry. I hope you found some snippet of this project useful as a takeaway for your time spent reading my ramblings. If nothing else, realize this: 90% of software development industry is simply making a front-end for data, from entry to representation and manipulation. So go, find the data that you call home, and make it pretty.</p></article><hr class="dingbat related mb6">
<aside class="other-projects related mb4" role="complementary"><h2>Other Projects</h2>
<div class="columns">
<div class="column column-1-2"><article class="project-card" vocab="http://schema.org/" typeof="CreativeWork" resource="/projects/loget-tracker/#project"><meta property="name" content="Loget Tracker">
<meta property="image" content="/assets/img/projects/loget-cover.png"> <a href="/projects/loget-tracker/" class="no-hover no-print-link flip-project" tabindex="-1"><div class="project-card-img aspect-ratio sixteen-nine flip-project-img "> <img src="/assets/img/projects/loget-cover.png" sizes="(min-width:86em)27.5rem,(min-width:54em)24.5rem,(min-width:42em)21.5rem,42rem" alt="Loget Tracker" width="864" height="486" loading="lazy">
</div></a><h3 class="project-card-title flip-project-title"> <a href="/projects/loget-tracker/" class="flip-title" property="mainEntityOfPage">Loget Tracker</a>
</h3>
<p class="project-card-text fine" property="disambiguatingDescription"> You gotta collect them all. <a class="fill-card no-hover" href="/projects/loget-tracker/" tabindex="-1"><span class="sr-only">Continue reading Loget Tracker</span></a></p></article></div>
<div class="column column-1-2"><article class="project-card" vocab="http://schema.org/" typeof="CreativeWork" resource="/projects/jgrade2/#project"><meta property="name" content="JGrade2">
<meta property="image" content="/assets/img/projects/jgrade2-cover.png"> <a href="/projects/jgrade2/" class="no-hover no-print-link flip-project" tabindex="-1"><div class="project-card-img aspect-ratio sixteen-nine flip-project-img "> <img src="/assets/img/projects/jgrade2-cover.png" sizes="(min-width:86em)27.5rem,(min-width:54em)24.5rem,(min-width:42em)21.5rem,42rem" alt="JGrade2" width="864" height="486" loading="lazy">
</div></a><h3 class="project-card-title flip-project-title"> <a href="/projects/jgrade2/" class="flip-title" property="mainEntityOfPage">JGrade2</a>
</h3>
<p class="project-card-text fine" property="disambiguatingDescription"> An updated grader for CS teachers. <a class="fill-card no-hover" href="/projects/jgrade2/" tabindex="-1"><span class="sr-only">Continue reading JGrade2</span></a></p></article></div>
</div></aside><footer class="content" role="contentinfo"><hr>
<p><small class="copyright">© 2025 All rights reserved. </small><nav class="legal"><small> <a class="heading flip-title" href="https://github.com/dscpsyl/dscpsyl.github.io" target="_blank" rel="noopener noreferrer">This site is published with Github Pages</a> </small></nav></p>
<hr class="sr-only"></footer></main><hy-drawer id="_drawer" class="" side="left" threshold="10" noscroll><header id="_sidebar" class="sidebar" role="banner"><div class="" style="">
<canvas id="meshy"></canvas><style> #meshy { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: -1; pointer-events: none; background-color: rgb(8, 0, 18); }</style>
<script> const _canvas = document.getElementById("meshy"); const ctx = _canvas.getContext("2d"); _canvas.width = window.innerWidth; _canvas.height = window.innerHeight; const MAX_NUM_POINTS = 88; const POINT_MOVE_SPEED = 0.1; const MAX_EDGE_DISTANCE = 150; const POINT_FADE_SPEED = 0.001; const MOUSE_INFLUENCE_RADIUS = 100; const MOUSE_IDLE_THRESHOLD = 1000; const LINE_STROKE_COLOR = "rgba(255, 255, 255, 0.5)"; const LINE_STROKE_WIDTH = 0.8; const POINT_FILL_COLOR = "rgba(255, 255, 255, ${p.opacity})"; let points = []; let edges = []; window.addEventListener("resize", () => { _canvas.width = window.innerWidth; _canvas.height = window.innerHeight; createPoints(MAX_NUM_POINTS); }); function createPoints(count) { points = []; for (let i = 0; i < count; i++) { points.push({ x: Math.random() * _canvas.width, y: Math.random() * _canvas.height, vx: (Math.random() - 0.5) * POINT_MOVE_SPEED, vy: (Math.random() - 0.5) * POINT_MOVE_SPEED, opacity: Math.random() * 0.5 + 0.5, }); } } function createEdges() { edges = []; for (let i = 0; i < points.length; i++) { for (let j = i + 1; j < points.length; j++) { const dx = points[i].x - points[j].x; const dy = points[i].y - points[j].y; const distance = Math.sqrt(dx * dx + dy * dy); if (distance < MAX_EDGE_DISTANCE) { edges.push([points[i], points[j]]); } } } } function drawMesh() { ctx.clearRect(0, 0, _canvas.width, _canvas.height); ctx.strokeStyle = LINE_STROKE_COLOR; ctx.lineWidth = LINE_STROKE_WIDTH; edges.forEach(([p1, p2]) => { ctx.beginPath(); ctx.moveTo(p1.x, p1.y); ctx.lineTo(p2.x, p2.y); ctx.closePath(); ctx.stroke(); }); points.forEach(p => { ctx.beginPath(); ctx.arc(p.x, p.y, 2, 0, Math.PI * 2); ctx.fillStyle = POINT_FILL_COLOR; ctx.fill(); }); } function updatePoints() { points.forEach(p => { p.x += p.vx; p.y += p.vy; if (p.x < 0 || p.x > _canvas.width) p.vx *= -1; if (p.y < 0 || p.y > _canvas.height) p.vy *= -1; p.opacity -= POINT_FADE_SPEED; if (p.opacity <= 0) { p.x = Math.random() * _canvas.width; p.y = Math.random() * _canvas.height; p.opacity = Math.random() * 0.5 + 0.5; } }); } let mouse = { x: null, y: null }; let mouseMoveTime = Date.now(); window.addEventListener("mousemove", (event) => { mouse.x = event.clientX; mouse.y = event.clientY; mouseMoveTime = Date.now(); }); window.addEventListener("mouseleave", () => { mouse.x = null; mouse.y = null; }); let timeSinceLastMove = Date.now() - mouseMoveTime; function applyMouseInfluence() { timeSinceLastMove = Date.now() - mouseMoveTime; points.forEach(p => { let dx = mouse.x - p.x; let dy = mouse.y - p.y; let distance = Math.sqrt(dx * dx + dy * dy); if (distance < MOUSE_INFLUENCE_RADIUS) { p.vx += dx * 0.001; p.vy += dy * 0.001; } else { if (Math.abs(p.vx) > POINT_MOVE_SPEED) { p.vx *= 0.999; } else { p.vx = (p.vx < 0 ? -POINT_MOVE_SPEED : POINT_MOVE_SPEED); } if (Math.abs(p.vy) > POINT_MOVE_SPEED) { p.vy *= 0.999; } else { p.vy = (p.vy < 0 ? -POINT_MOVE_SPEED : POINT_MOVE_SPEED); } } if (timeSinceLastMove > MOUSE_IDLE_THRESHOLD) { if (Math.abs(p.vx) > POINT_MOVE_SPEED) { p.vx *= 0.995; } else { p.vx = (p.vx < 0 ? -POINT_MOVE_SPEED : POINT_MOVE_SPEED); } if (Math.abs(p.vy) > POINT_MOVE_SPEED) { p.vy *= 0.995; } else { p.vy = (p.vy < 0 ? -POINT_MOVE_SPEED : POINT_MOVE_SPEED); } } }); } createPoints(MAX_NUM_POINTS); function animate() { createEdges(); applyMouseInfluence(); drawMesh(); updatePoints(); requestAnimationFrame(animate); } animate(); </script>
</div>
<div class="sidebar-sticky">
<div class="sidebar-about"> <a class="no-hover" href="/" tabindex="-1"> <img src="/assets/img/logo.svg" class="avatar" alt="David Jr Sim" width="120" height="120" loading="lazy"> </a> <a class="sidebar-title" href="/"><h2 class="h1" , style="font-size: 2.75em">David Jr Sim</h2></a><p class=""> Automation, AI, and the aforementioned uprising.</p>
</div>
<nav class="sidebar-nav heading" role="navigation"> <span class="sr-only">Navigation:</span><ul>
<li> <a id="_drawer--opened" href="/blog/" class="sidebar-nav-item "> Blog </a>
</li>
<li> <a href="/projects/" class="sidebar-nav-item "> Showcase </a>
</li>
<li> <a href="/research/" class="sidebar-nav-item "> Research </a>
</li>
<li> <a href="/resume/" class="sidebar-nav-item "> Résumé </a>
</li>
</ul></nav><div class="sidebar-social"> <span class="sr-only">Social:</span><ul>
<li> <a href="https://github.com/dscpsyl" title="GitHub" class="no-mark-external" target="_blank" rel="noopener noreferrer"> <span class="icon-github"></span> <span class="sr-only">GitHub</span> </a>
</li>
<li> <a href="https://www.linkedin.com/in/davidjsim" title="LinkedIn" class="no-mark-external" target="_blank" rel="noopener noreferrer"> <span class="icon-linkedin2"></span> <span class="sr-only">LinkedIn</span> </a>
</li>
</ul>
</div>
</div></header></hy-drawer><hr class="sr-only" hidden> </hy-push-state> <script nomodule>(()=>{var t,n=document.createElement("script");!("noModule"in n)&&"onbeforeload"in n&&(t=!1,document.addEventListener("beforeload",function(e){if(e.target===n)t=!0;else if(!e.target.hasAttribute("nomodule")||!t)return;e.preventDefault()},!0),n.type="module",n.src=".",document.head.appendChild(n),n.remove())})(); </script> <script src="/assets/js/hydejack-9.2.1.js" type="module"></script> <script src="/assets/js/LEGACY-hydejack-9.2.1.js" nomodule defer></script> <script type="module"> if ('serviceWorker' in navigator) { /**/ navigator.serviceWorker.getRegistration() .then(r => r.unregister()) .catch(() => {}); /**/ } </script> <script> document.getElementById('_pushState').addEventListener('hy-push-state-after', function (e) { function e(e){ (console.error?console.error:console.log).call(console,e) } function t(e){ return l.innerHTML='<a href="'+e.replace(/"/g,"&quot;")+'"></a>',l.childNodes[0].getAttribute("href") } function r(e,t){ var r=e.substr(t,2);return parseInt(r,16) } function n(e,n){ for(var o="",c=r(e,n),a=n+2;a<e.length;a+=2){ var l=r(e,a)^c; o+=String.fromCharCode(l) } return t(o) } var o="/cdn-cgi/l/email-protection#", c=".__cf_email__", a="data-cfemail", l=document.createElement("div"); !function(){ for(var t=document.getElementsByTagName("a"),r=0;r<t.length;r++) try{ var c=t[r],a=c.href.indexOf(o); a>-1&&(c.href="mailto:"+n(c.href,a+o.length)) }catch(t){ e(t) } }(), function(){ for(var t=document.querySelectorAll(c),r=0;r<t.length;r++) try{ var o=t[r],l=n(o.getAttribute(a),0),i=document.createTextNode(l); o.parentNode.replaceChild(i,o) }catch(t){ e(t) } }() }); </script><div hidden>
<h2 class="sr-only">Templates (for web app):</h2>
<template id="_animation-template"><div class="animation-main fixed-top">
<nav id="breadcrumbs" class="screen-only"><ul></ul></nav><div class="content"><div class="page"></div></div>
</div></template> <template id="_loading-template"><div class="loading nav-btn fr"> <span class="sr-only">Loading…</span> <span class="icon-cog"></span>
</div></template> <template id="_error-template"><div class="page">
<h1 class="page-title">Error</h1>
<p class="lead"> Sorry, an error occurred while loading <a class="this-link" href=""></a>.</p>
</div></template> <template id="_permalink-template"> <a href="#" class="permalink"> <span class="sr-only">Permalink</span> <span class="content-hash"></span> </a> </template> <template id="_dark-mode-template"> <button id="_dark-mode" class="nav-btn no-hover"> <span class="sr-only">Dark Mode</span> <span class="icon-brightness-contrast"></span> </button> </template> <template id="_search-template"> <button id="_search" class="nav-btn no-hover"> <label class="sr-only" for="_search-input">Search</label> <span class="icon-search"></span> </button><div id="_search-box">
<div class="nav-btn"> <span class="icon-search"></span>
</div>
<input id="_search-input" type="search" class="form-control form-control-lg nav-btn" placeholder="Type something…"> <button type="reset" class="nav-btn no-hover"> <span class="sr-only">Close</span> <span class="icon-cross"></span> </button>
</div>
<div id="_hits"></div></template>
</div>
</body>
</html>
